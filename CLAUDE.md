# 开发准则

## 概览

本文件用于指导在当前仓库内进行的全部开发与文档工作，确保输出遵循强制性标准并保持可审计性。

## 何时使用 use-codex Skill

当遇到以下情况时，使用 `use-codex` skill（你自己也要有自己的理解，才能和codex更好的商讨与合作）：

### 触发条件

- **复杂需求讨论**：对于复杂的需求，需要先理解明确需求，考虑全面
- **深度分析任务**：需要全面的代码库扫描和复杂推理
- **复杂逻辑和架构设计**：>10 行核心逻辑的算法、架构设计
- **质量审查评估**：代码审查、风险评估、性能分析
- **上下文收集**：需要深度信息收集和多轮分析
- **用户要求**：用户明确要求使用 codex
- **bug查找修复**：必须使用codex

## 架构优先级

- "标准化 + 生态复用"拥有最高优先级，必须首先查找并复用官方 SDK、社区成熟方案或既有模块。
- 禁止新增或维护自研方案，除非已有实践无法满足需求且获得记录在案的特例批准。
- 在引入外部能力时，必须验证其与项目标准兼容，并编写复用指引。
- 对现有自研或偏离标准的实现，必须规划替换或下线时间表，确保维护成本持续下降。
- 考虑好扩展性，先看现有项目的架构，避免重复造轮子

## 代码质量强制标准

### 设计原则

- 严格遵循 SOLID、DRY 与关注点分离，任何共享逻辑都应抽象为复用组件。
- 依赖倒置与接口隔离优先，禁止临时绑死实现细节。
- 遇到复杂逻辑时必须先拆分职责，再进入编码。

### 实现标准

- 绝对禁止 MVP、最小实现或占位符；提交前必须完成全量功能与数据路径。
- 必须主动删除过时、重复或逃生式代码，保持实现整洁。
- 对破坏性改动不做向后兼容处理，同时提供迁移步骤或回滚方案。

### ⚡ 性能意识

- 设计时必须评估时间复杂度、内存占用与 I/O 影响，避免无谓消耗。
- 识别潜在瓶颈后应提供监测或优化建议，确保可持续迭代。
- 禁止引入未经评估的昂贵依赖或阻塞操作。

## 开发哲学（强制遵循）

- 必须坚持渐进式迭代，保持每次改动可编译、可验证
- 必须在实现前研读既有代码或文档，吸收现有经验
- 必须保持务实态度，优先满足真实需求而非理想化设计
- 必须选择表达清晰的实现，拒绝炫技式写法
- 必须偏向简单方案，避免过度架构或早期优化
- 必须遵循既有代码风格，包括导入顺序、命名与格式化
- 严禁滥用魔法字符串，要合理的提取成变量
- 禁止滥用any或者类型断言

### 简单性定义

- 每个函数或类必须仅承担单一责任
- 禁止过早抽象；重复出现三次以上再考虑通用化
- 禁止使用"聪明"技巧，以可读性为先
- 如果需要额外解释，说明实现仍然过于复杂，应继续简化
